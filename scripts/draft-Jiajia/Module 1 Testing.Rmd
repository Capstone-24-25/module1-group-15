
```{r}
data <- read.csv("data2/biomarker-raw.csv")
```

```{r}
# Load necessary libraries
library(caret)

# Split the data (e.g., 70% training, 30% testing)
set.seed(123)
trainIndex <- createDataPartition(data$Group, p = 0.7, list = FALSE)
train_data <- data[trainIndex, ]
test_data <- data[-trainIndex, ]

# Apply the selection procedures (e.g., T-test, RF, Logistic Regression) only on the train_data
# Example: For Random Forest on training data
# Load randomForest and caret libraries for model building and feature selection
library(randomForest)

# Define train data as X (predictors) and Y (response variable)
rf_model <- randomForest(Group ~ ., data = train_data, importance = TRUE)
important_features <- importance(rf_model)

# Select top features from Random Forest (and later from other methods) for the model

```


```{r}
# For instance, selecting the top 20 proteins from Random Forest
top_predictors_rf <- names(sort(important_features[, "MeanDecreaseAccuracy"], decreasing = TRUE))[1:20]

# Repeat similarly for T-test and Logistic Regression
# Example for T-test:
t_test_results <- sapply(train_data[, -c(1,2)], function(protein) {
  t.test(protein ~ train_data$Group)$p.value
})
top_predictors_ttest <- names(sort(t_test_results))[1:20]

# You can apply logistic regression with feature selection methods such as stepwise selection for logistic regression predictors.

```
```{r}
# Combine top predictors from each method
top_predictors_all <- list(rf = top_predictors_rf, ttest = top_predictors_ttest)

# Identify proteins appearing in at least two lists
library(purrr)
common_predictors <- Reduce(intersect, top_predictors_all)  # Modify if using a higher threshold

```


